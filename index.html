<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player M3U8 - Tizen Smart TV Otimizado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: white;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            max-width: 1200px;
            width: 100%;
        }

        h1 {
            color: white;
            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .button-container {
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            color: white;
        }

        .btn-show {
            background: linear-gradient(45deg, #4CAF50, #2E7D32);
        }

        .btn-hide {
            background: linear-gradient(45deg, #f44336, #c62828);
        }

        .btn-m3u8 {
            background: linear-gradient(45deg, #9c27b0, #6a1b9a);
        }

        .btn-external {
            background: linear-gradient(45deg, #2196F3, #1565C0);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .player-container {
            display: none;
            width: 100%;
            margin-top: 20px;
            animation: fadeIn 0.5s ease;
        }

        .player-container.show {
            display: block;
        }

        .video-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .tizen-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .channel-selection {
            display: none;
            margin: 20px 0;
            animation: fadeIn 0.5s ease;
        }

        .channel-selection.show {
            display: block;
        }

        .channel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .channel-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 60px;
        }

        .channel-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .channel-btn.active {
            background: linear-gradient(45deg, #4CAF50, #2E7D32);
            transform: scale(1.05);
        }

        .input-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: white;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .playlist-container {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .m3u8-channel {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .m3u8-channel:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .m3u8-channel.active {
            background: linear-gradient(45deg, rgba(76, 175, 80, 0.3), rgba(46, 125, 50, 0.3));
            font-weight: 600;
        }

        .status {
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: 600;
            display: none;
        }

        .status.visible {
            display: block;
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.3);
            color: #4CAF50;
        }

        .status.error {
            display: block;
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #f44336;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Otimiza√ß√µes para Tizen TV */
        @media screen and (min-width: 1920px) {
            .btn {
                padding: 20px 40px;
                font-size: 22px;
            }
            
            .control-btn {
                padding: 15px 30px;
                font-size: 20px;
                min-width: 150px;
            }
            
            .channel-btn {
                padding: 20px;
                font-size: 20px;
                min-height: 80px;
            }
            
            .input-group input {
                padding: 15px 20px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¨ Player M3U8 - Tizen TV</h1>
        
        <div class="button-container">
            <button class="btn btn-show" id="showBtn">üì∫ Canais Fixos</button>
            <button class="btn btn-m3u8" id="m3u8Btn">üé¨ M3U8 Player</button>
            <button class="btn btn-hide" id="hideBtn" disabled>‚ùå Fechar</button>
        </div>

        <!-- Se√ß√£o de Canais Fixos -->
        <div class="channel-selection" id="channelSelection">
            <h2>üì∫ Escolha um Canal</h2>
            <div class="channel-grid" id="channelGrid"></div>
        </div>

        <!-- Player para Canais Fixos -->
        <div class="player-container" id="playerContainer">
            <div class="video-wrapper">
                <iframe id="playerFrame" class="tizen-video" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="controls">
                <button class="control-btn" onclick="hidePlayer()">Voltar</button>
            </div>
        </div>

        <!-- Player M3U8 -->
        <div class="player-container" id="m3u8Container">
            <!-- Input para Playlist Oculta -->
            <div class="input-section">
                <h3>üîê Playlist Oculta</h3>
                <div class="input-group">
                    <label for="codeInput">C√≥digo de Acesso:</label>
                    <input type="text" id="codeInput" placeholder="Digite o c√≥digo da playlist">
                </div>
                <button class="btn btn-m3u8" id="loadHiddenBtn" onclick="loadHiddenPlaylist()">Carregar Playlist</button>
            </div>

            <!-- Input Manual -->
            <div class="input-section">
                <h3>üåê Carregar Playlist Manualmente</h3>
                <div class="input-group">
                    <label for="urlInput">URL da Playlist:</label>
                    <input type="url" id="urlInput" placeholder="https://exemplo.com/playlist.m3u8">
                </div>
                <button class="btn btn-m3u8" onclick="loadPlaylist()">Carregar URL</button>
            </div>

            <!-- Player de V√≠deo -->
            <div class="video-wrapper">
                <video id="tizenVideo" class="tizen-video" controls playsinline webkit-playsinline></video>
            </div>

            <!-- Controles -->
            <div class="controls">
                <button class="control-btn" onclick="previousChannel()">‚èÆ Anterior</button>
                <button class="control-btn" onclick="nextChannel()">‚è≠ Pr√≥ximo</button>
                <button class="control-btn" onclick="reloadChannel()">üîÑ Recarregar</button>
                <button class="control-btn" onclick="togglePlayPause()">‚èØ Play/Pause</button>
            </div>

            <!-- Lista de Canais -->
            <div>
                <h3>üìã Lista de Canais (<span id="channelCount">0</span>)</h3>
                <div class="playlist-container" id="m3u8Playlist"></div>
            </div>
        </div>

        <!-- Status -->
        <div class="status" id="status"></div>
    </div>

    <!-- Bot√µes Externos -->
    <div class="button-container" style="margin-top: 30px;">
        <button class="btn btn-external" onclick="window.open('https://nossoplayeronlinehd.blog/', '_blank')">üåê Nosso Player Online</button>
        <button class="btn btn-external" onclick="window.open('https://embedcanaistv.com/', '_blank')">üì∫ Embed Canais TV</button>
    </div>

    <script>
        // Canais fixos otimizados para Tizen
        const channels = [
            { name: 'Warner', url: 'https://embedcanaistv.com/warner/', icon: 'üé¨' },
            { name: 'ESPN', url: 'https://embedcanaistv.com/espn/', icon: '‚öΩ' },
			{ name: 'ESPN2', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=espn2', icon: '‚öΩ' },
			{ name: 'ESPN3', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=espn3', icon: '‚öΩ' },
			{ name: 'ESPN4', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=espn4', icon: '‚öΩ' },
			{ name: 'ESPN5', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=espn5', icon: '‚öΩ' },
			{ name: 'ESPN6', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=espn6', icon: '‚öΩ' },
			{ name: 'SportTV1', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=sportv1', icon: '‚öΩ' },
			{ name: 'SportTV2', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=sportv2', icon: '‚öΩ' },
        	{ name: 'SportTV3', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=sportv3', icon: '‚öΩ' },
        	{ name: 'Premiere', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=premiereclubes', icon: '‚öΩ' },
        	{ name: 'Premiere2', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=premiere2', icon: '‚öΩ' },
        	{ name: 'Premiere3', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=premiere3', icon: '‚öΩ' },
        	{ name: 'Premiere4', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=premiere4', icon: '‚öΩ' },
        	{ name: 'Premiere5', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=premiere5', icon: '‚öΩ' },
        	{ name: 'Premiere6', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=premiere6', icon: '‚öΩ' },
        	{ name: 'TNT', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=tnt', icon: 'üì∫' },
			{ name: 'TNTseries', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=tntseries', icon: 'üì∫' },
			{ name: 'HBO', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=hbo', icon: 'üì∫' },
			{ name: 'HBO2', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=hbo2', icon: 'üì∫' },
        	{ name: 'Universal', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=universal', icon: 'üì∫' },
			{ name: 'Space', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=space', icon: 'üì∫' },
            { name: 'Telecine Action', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=telecineaction', icon: 'üì∫' },
            { name: 'Megapix', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=megapix', icon: 'üì∫' },
			{ name: 'UFC', url: '//%72%65%64%65%63%61%6E%61%69%73%74%76%2E%67%64/player3/ch.php?canal=ufcfightpass', icon: 'üì∫' },
        ];

        // Playlists ocultas atualizadas
        const hiddenPlaylists = {
             "tvmista": [
                    "https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/tvmisto.m3u8",
                    "https://api.allorigins.win/raw?url=https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/tvmisto.m3u8",
                    "https://cors-anywhere.herokuapp.com/https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/tvmisto.m3u8"
                ],
                "xxxxxxx": [
                    "https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/teste.m3u8",
                    "https://api.allorigins.win/raw?url=https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/teste.m3u8",
                    "https://cors-anywhere.herokuapp.com/https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/teste.m3u8"
                ],
                "xxxxxxxx": [
                    "https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/educativo.m3u8",
                    "https://api.allorigins.win/raw?url=https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/educativo.m3u8",
                    "https://cors-anywhere.herokuapp.com/https://raw.githubusercontent.com/victorozzyy/m3uplayer-web/refs/heads/main/playlists/educativo.m3u8"
                ]
            };

        // Vari√°veis globais
        let m3u8Channels = [];
        let currentM3U8Channel = -1;
        let hls = null;

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar bot√µes
            document.getElementById('showBtn').addEventListener('click', showChannelSelection);
            document.getElementById('m3u8Btn').addEventListener('click', showM3U8Player);
            document.getElementById('hideBtn').addEventListener('click', hidePlayer);
            
            // Configurar eventos de teclado para Smart TV
            setupTVControls();
            
            // Verificar se √© uma Tizen TV
            if (isTizenTV()) {
                showStatus('üñ•Ô∏è Modo Tizen ativado - Player otimizado', 'visible');
            }
        });

        // Fun√ß√µes principais
        function showChannelSelection() {
            hideAllPlayers();
            document.getElementById('channelSelection').classList.add('show');
            updateButtons('channel');
            showStatus('üì∫ Selecione um canal para assistir', 'visible');
            createChannelButtons();
        }

        function showM3U8Player() {
            hideAllPlayers();
            document.getElementById('m3u8Container').classList.add('show');
            updateButtons('m3u8');
            showStatus('üé¨ Carregue uma playlist M3U8', 'visible');
        }

        function hidePlayer() {
            hideAllPlayers();
            if (hls) {
                hls.destroy();
                hls = null;
            }
            updateButtons('none');
            showStatus('üî¥ Selecione uma op√ß√£o para come√ßar', 'visible');
        }

        function hideAllPlayers() {
            document.getElementById('channelSelection').classList.remove('show');
            document.getElementById('playerContainer').classList.remove('show');
            document.getElementById('m3u8Container').classList.remove('show');
            
            // Limpar players
            document.getElementById('playerFrame').src = '';
            const video = document.getElementById('tizenVideo');
            video.src = '';
            video.load();
        }

        function updateButtons(active) {
            document.getElementById('showBtn').disabled = active === 'channel';
            document.getElementById('m3u8Btn').disabled = active === 'm3u8';
            document.getElementById('hideBtn').disabled = active === 'none';
        }

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        // Canais Fixos
        function createChannelButtons() {
            const grid = document.getElementById('channelGrid');
            grid.innerHTML = '';
            
            channels.forEach((channel, index) => {
                const btn = document.createElement('button');
                btn.className = 'channel-btn';
                btn.innerHTML = `${channel.icon} ${channel.name}`;
                btn.onclick = () => playFixedChannel(channel, index);
                grid.appendChild(btn);
            });
        }

        function playFixedChannel(channel, index) {
            // Limpar sele√ß√£o anterior
            document.querySelectorAll('.channel-btn').forEach(btn => btn.classList.remove('active'));
            
            // Marcar como ativo
            document.querySelectorAll('.channel-btn')[index].classList.add('active');
            
            // Configurar iframe
            const iframe = document.getElementById('playerFrame');
            iframe.src = channel.url;
            
            // Mostrar player
            document.getElementById('playerContainer').classList.add('show');
            showStatus(`‚ñ∂Ô∏è Assistindo: ${channel.name}`, 'visible');
        }

        // Player M3U8
        function loadHiddenPlaylist() {
            const code = document.getElementById('codeInput').value.trim();
            const btn = document.getElementById('loadHiddenBtn');
            
            if (!code) {
                showStatus('‚ùå Digite um c√≥digo de acesso', 'error');
                return;
            }
            
            if (!hiddenPlaylists[code]) {
                showStatus('‚ùå C√≥digo inv√°lido. Tente: tvmista ou teste', 'error');
                return;
            }
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Carregando...';
            
            // Tentar todas as URLs da playlist at√© uma funcionar
            let loaded = false;
            const promises = hiddenPlaylists[code].map(url => loadPlaylistFromUrl(url));
            
            Promise.any(promises)
                .then(() => {
                    btn.disabled = false;
                    btn.textContent = 'Carregar Playlist';
                })
                .catch(() => {
                    showStatus('‚ùå N√£o foi poss√≠vel carregar a playlist', 'error');
                    btn.disabled = false;
                    btn.textContent = 'Carregar Playlist';
                });
        }

        function loadPlaylist() {
            const url = document.getElementById('urlInput').value.trim();
            
            if (!url) {
                showStatus('‚ùå Digite uma URL v√°lida', 'error');
                return;
            }
            
            loadPlaylistFromUrl(url);
        }

        function loadPlaylistFromUrl(url) {
            showStatus('üîÑ Carregando playlist...', 'visible');
            
            return fetch(url)
                .then(response => {
                    if (!response.ok) throw new Error('Erro na requisi√ß√£o');
                    return response.text();
                })
                .then(data => {
                    parseM3U(data);
                    showStatus(`‚úÖ Playlist carregada - ${m3u8Channels.length} canais`, 'visible');
                    return true;
                })
                .catch(error => {
                    showStatus(`‚ùå Erro ao carregar: ${error.message}`, 'error');
                    throw error;
                });
        }

        function parseM3U(data) {
            m3u8Channels = [];
            const lines = data.split('\n');
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                if (line.startsWith('#EXTINF:')) {
                    const title = line.split(',')[1] || `Canal ${m3u8Channels.length + 1}`;
                    const nextLine = lines[i + 1] ? lines[i + 1].trim() : '';
                    
                    if (nextLine && !nextLine.startsWith('#') && (nextLine.startsWith('http') || nextLine.startsWith('//'))) {
                        m3u8Channels.push({
                            title: title,
                            url: nextLine
                        });
                    }
                }
            }
            
            updatePlaylistDisplay();
        }

        function updatePlaylistDisplay() {
            const playlist = document.getElementById('m3u8Playlist');
            playlist.innerHTML = '';
            
            m3u8Channels.forEach((channel, index) => {
                const item = document.createElement('div');
                item.className = 'm3u8-channel';
                item.textContent = `${index + 1}. ${channel.title}`;
                item.onclick = () => playM3U8Channel(index);
                playlist.appendChild(item);
            });
            
            document.getElementById('channelCount').textContent = m3u8Channels.length;
            
            // Reproduzir o primeiro canal se existir
            if (m3u8Channels.length > 0) {
                playM3U8Channel(0);
            }
        }

        // Reprodu√ß√£o otimizada para Tizen
        function playM3U8Channel(index) {
            if (index < 0 || index >= m3u8Channels.length) return;
            
            currentM3U8Channel = index;
            const channel = m3u8Channels[index];
            const video = document.getElementById('tizenVideo');
            
            // Atualizar sele√ß√£o
            document.querySelectorAll('.m3u8-channel').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.m3u8-channel')[index].classList.add('active');
            
            showStatus(`üîÑ Carregando: ${channel.title}`, 'visible');
            
            // Limpar player anterior
            if (hls) {
                hls.destroy();
                hls = null;
            }
            
            video.src = '';
            video.load();
            
            // Configura√ß√µes espec√≠ficas para Tizen
            video.crossOrigin = 'anonymous';
            video.preload = 'auto';
            video.playsInline = true;
            
            // Verificar se √© HLS
            if (channel.url.includes('.m3u8')) {
                if (isTizenTV()) {
                    // Tizen tem suporte nativo excelente para HLS
                    playNativeHLS(video, channel);
                } else if (typeof Hls !== 'undefined' && Hls.isSupported()) {
                    // Usar Hls.js para outros navegadores
                    playWithHlsJS(video, channel);
                } else {
                    // Fallback para reprodu√ß√£o nativa
                    playNativeHLS(video, channel);
                }
            } else {
                // Reprodu√ß√£o direta para outros formatos
                playDirectStream(video, channel);
            }
        }

        function playNativeHLS(video, channel) {
            console.log('üîß Usando HLS nativo no Tizen');
            
            video.src = channel.url;
            
            video.addEventListener('loadedmetadata', function() {
                video.play()
                    .then(() => showStatus(`‚ñ∂Ô∏è Assistindo: ${channel.title}`, 'visible'))
                    .catch(error => {
                        console.error('Erro ao reproduzir:', error);
                        showStatus('‚ñ∂Ô∏è Canal carregado. Pressione Play.', 'visible');
                    });
            });
            
            video.addEventListener('error', function() {
                showStatus('‚ùå Erro ao carregar o v√≠deo', 'error');
            });
        }

        function playWithHlsJS(video, channel) {
            console.log('üîß Usando Hls.js para reprodu√ß√£o');
            
            hls = new Hls({
                enableWorker: false,
                lowLatencyMode: false,
                backBufferLength: 30
            });
            
            hls.loadSource(channel.url);
            hls.attachMedia(video);
            
            hls.on(Hls.Events.MANIFEST_PARSED, function() {
                video.play()
                    .then(() => showStatus(`‚ñ∂Ô∏è Assistindo: ${channel.title}`, 'visible'))
                    .catch(error => {
                        console.error('Erro ao reproduzir:', error);
                        showStatus('‚ñ∂Ô∏è Canal carregado. Pressione Play.', 'visible');
                    });
            });
            
            hls.on(Hls.Events.ERROR, function(event, data) {
                if (data.fatal) {
                    showStatus('‚ùå Erro fatal no player. Tente outro canal.', 'error');
                    hls.destroy();
                }
            });
        }

        function playDirectStream(video, channel) {
            console.log('üîß Reprodu√ß√£o direta do stream');
            
            video.src = channel.url;
            
            video.addEventListener('loadeddata', function() {
                video.play()
                    .then(() => showStatus(`‚ñ∂Ô∏è Assistindo: ${channel.title}`, 'visible'))
                    .catch(error => {
                        console.error('Erro ao reproduzir:', error);
                        showStatus('‚ñ∂Ô∏è Canal carregado. Pressione Play.', 'visible');
                    });
            });
            
            video.addEventListener('error', function() {
                showStatus('‚ùå Erro ao carregar o v√≠deo', 'error');
            });
        }

        // Controles
        function previousChannel() {
            if (m3u8Channels.length === 0) return;
            const prevIndex = (currentM3U8Channel - 1 + m3u8Channels.length) % m3u8Channels.length;
            playM3U8Channel(prevIndex);
        }

        function nextChannel() {
            if (m3u8Channels.length === 0) return;
            const nextIndex = (currentM3U8Channel + 1) % m3u8Channels.length;
            playM3U8Channel(nextIndex);
        }

        function reloadChannel() {
            if (currentM3U8Channel >= 0) {
                playM3U8Channel(currentM3U8Channel);
            }
        }

        function togglePlayPause() {
            const video = document.getElementById('tizenVideo');
            if (video.paused) {
                video.play().catch(e => console.error(e));
            } else {
                video.pause();
            }
        }

        // Utilit√°rios
        function isTizenTV() {
            return navigator.userAgent.includes('Tizen') || 
                   navigator.userAgent.includes('SMART-TV') ||
                   typeof tizen !== 'undefined';
        }

        function setupTVControls() {
            document.addEventListener('keydown', function(e) {
                const key = e.keyCode || e.which;
                
                // Teclas espec√≠ficas para Smart TV
                switch(key) {
                    case 37: // Left
                    case 4:   // Tizen Left
                        previousChannel();
                        break;
                    case 39: // Right
                    case 5:   // Tizen Right
                        nextChannel();
                        break;
                    case 13: // Enter
                    case 32: // Space
                        togglePlayPause();
                        break;
                    case 27: // ESC
                    case 10009: // Tizen Return
                        hidePlayer();
                        break;
                }
            });
        }
    </script>

    <!-- HLS.js para navegadores que n√£o suportam HLS nativo -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</body>
</html>
